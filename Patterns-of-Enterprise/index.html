<!DOCTYPE html>



  


<html class="theme-next pisces use-motion" lang="ru">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">












<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=6.0.1" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=6.0.1" color="#222">





  <meta name="keywords" content="Hexo, NexT">




  


  <link rel="alternate" href="/atom.xml" title="Артём Карпов" type="application/atom+xml">






<meta name="description" content="Artyom K. has been developing enterprise software solutions since 2005. Technologies / knowledge, in order:  C# / .NET  Python Algorithms and data structures SQL (SQL Server, MySQL) HTML, CSS, XML / X">
<meta property="og:type" content="website">
<meta property="og:title" content="Обо мне &#x2F; About">
<meta property="og:url" content="http://www.artkpv.net/about/index.html">
<meta property="og:site_name" content="Артём Карпов">
<meta property="og:description" content="Artyom K. has been developing enterprise software solutions since 2005. Technologies / knowledge, in order:  C# / .NET  Python Algorithms and data structures SQL (SQL Server, MySQL) HTML, CSS, XML / X">
<meta property="og:locale" content="ru">
<meta property="og:updated_time" content="2020-01-16T09:27:21.979Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Обо мне &#x2F; About">
<meta name="twitter:description" content="Artyom K. has been developing enterprise software solutions since 2005. Technologies / knowledge, in order:  C# / .NET  Python Algorithms and data structures SQL (SQL Server, MySQL) HTML, CSS, XML / X">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '6.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.artkpv.net/about/">





  <title>Notes from PoEAA | Артём Карпов</title>
  








</head>

<body itemscope="" itemtype="http://schema.org/WebPage" lang="ru">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    

    <header id="header" class="header" itemscope="" itemtype="http://schema.org/WPHeader">
      <div class="header-inner"> <div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Артём Карпов</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle"></p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-home"></i> <br>Главная</a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            <i class="menu-item-icon fa fa-fw fa-user"></i> <br>О сайте | About</a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope="" itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.artkpv.net/Patterns-of-Enterprise/">

    <span hidden itemprop="author" itemscope="" itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Артём Карпов">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope="" itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Артём Карпов">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Notes from PoEAA</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Размещено</span>
              
              <time title="Дата создания записи" itemprop="dateCreated datePublished" datetime="2017-07-17T00:00:00+03:00">2017-07-17</time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <p><img src="/images/poeaa.jpg" alt="PoEAA"></p>
<p>This is the book you need if you wish to develop an application for quickly evolving, complex rules of some enterprise. Though it has some out dated parts probably every serious programmer should read it. The book is about patterns for building enterprise applications those ordered for some specific users and with main limitation being development time and intended to run long. Authors compiled many years of top professional developers wisdom. They do not need an introduction I guess (esp. Martin Fowler).</p>
<p>Book is large and divided into two parts. The first one gives some tutorial on applying patterns. The second part is a reference. </p>
<p>Below is my very short notes to some key chapters. </p>
<a id="more"></a>
<hr>
<h1 id="Preface"><a href="#Preface" class="headerlink" title="Preface"></a>Preface</h1><p>Authors advice to use iterative development, deliver to the end user as soon as you have something.</p>
<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>Architecture definition (see <a href="#Key-words">Key words</a>).</p>
<h2 id="Enterprise-Applications-EA"><a href="#Enterprise-Applications-EA" class="headerlink" title="Enterprise Applications (EA)"></a>Enterprise Applications (EA)</h2><p>Differences of EA from other kinds of soft: complex data and business rules; but it is easier as there is no complex multi-threading and hardware integration.</p>
<p>EA characterized by persistent data, a lot of data (usually using relational DBs), concurrent data access, many UI screens, integration with other EA, conceptual dissonance, complex business “illogic”. EA can be relatively small (though important also).</p>
<h2 id="Kinds-of-EA"><a href="#Kinds-of-EA" class="headerlink" title="Kinds of EA"></a>Kinds of EA</h2><p>There are different kinds. Choose appropriate architecture for each, knowing the differences. Also choose appropriate tools.</p>
<p>Example 1. B2C retail web site. Highly loaded application. Many users. It should be scalable (adding hardware) and good performance.</p>
<p>Example 2. Complex leasing system. Complex and arbitrary business logic.</p>
<p>Example 3. Expense tracking system. Simple logic. Small volume of users. But it should evolve quickly.</p>
<h2 id="Thinking-About-Performance"><a href="#Thinking-About-Performance" class="headerlink" title="Thinking About Performance"></a>Thinking About Performance</h2><p>Consider getting application up and running before dealing with performance issues.</p>
<p>Apply performance architecture tips carefully.</p>
<p>Ensure optimizations do optimize performance and not just making code harder to understand — test before and after.</p>
<p>Retest all performance optimizations after each environment (re)configuration.</p>
<p>Usually it is better to construct for scalability as adding a resource is cheaper than optimizing a system. It is cheaper to buy a new server than to hire a new programmer.</p>
<h2 id="Patterns"><a href="#Patterns" class="headerlink" title="Patterns"></a>Patterns</h2><p>Understand problems that patterns solve so that when they are came across a pattern can be found. Know what problem a pattern solve and how it does it.</p>
<p>Tweak a pattern so that it is better suited for your solution. Don’t apply it blindly.</p>
<p>Many patterns are connected to each other.</p>
<p>Use patterns to communicate ideas.</p>
<p>Structure of Patterns.  …  Be careful not using examples. They are not macro to be used.</p>
<p>Know that these patterns are not all for EA.</p>
<p>Have fun applying these patterns.</p>
<h1 id="Part-1-Introduction-to-problems-of-enterprise-applications-development"><a href="#Part-1-Introduction-to-problems-of-enterprise-applications-development" class="headerlink" title="Part 1. Introduction to problems of enterprise applications development"></a>Part 1. Introduction to problems of enterprise applications development</h1><h2 id="Chapter-1-Layering"><a href="#Chapter-1-Layering" class="headerlink" title="Chapter 1. Layering"></a>Chapter 1. Layering</h2><p>The most common pattern. Layers are opaque: layer 3 does not know about layer 1. Layer 1 does not know about layer 2. A lower layer does not know anything about a higher layer. (Can be not so, see below, in <a href="#Three-principal-layers">three principal layers</a>)</p>
<p>…<br>Client-server — two layered system.</p>
<p>All layers can run on one machine.</p>
<h3 id="Three-principal-layers"><a href="#Three-principal-layers" class="headerlink" title="Three principal layers"></a>Three principal layers</h3><p>Presentation layer — handles interactions between user and the software. Responsible for handle input and interpret it for domain and data source.</p>
<p>Data source — any kind of other software. This can be DBs, transaction services.</p>
<p>Domain logic — a particular logic about problem the software solve. Can be calculations, validations.</p>
<p>Always try to separate into three layers. From subroutine level to packages level.</p>
<p>This can be thought as a core surrounded by interfaces. Data source is much similar to Presentation. But Fowler divides this two.</p>
<p>Domain and data source should never be dependant on Presentation.</p>
<p>In case of not understanding where domain logic is. Try to introduce another package, command-line to Web in that case what would be duplicated will point to domain logic. The similar for replacing database with xml.</p>
<p>Example of the mixing a domain logic in presentation. Colouring a product to a red colour if it was increase in sales by 10%. This was put to the interface.</p>
<h3 id="Choosing-where-to-run-your-layers"><a href="#Choosing-where-to-run-your-layers" class="headerlink" title="Choosing where to run your layers"></a>Choosing where to run your layers</h3><p>(This is obsolete? Now it mostly Web and Mobile.)</p>
<h2 id="Chapter-2-Organizing-Domain-Logic"><a href="#Chapter-2-Organizing-Domain-Logic" class="headerlink" title="Chapter 2. Organizing Domain Logic"></a>Chapter 2. Organizing Domain Logic</h2><p>Three patterns here: transaction script, table module, domain model.</p>
<p><em>Transaction Script</em> is procedure for each business action. Can call subroutines. Useful for simple applications. For more complicated <em>Domain Model</em> to be used.</p>
<p>Try to use <em>Domain Model</em> everywhere if you’re used to it.</p>
<p><em>Table Module</em> is in a middle between <em>Domain model</em> and <em>Transaction Script</em>. It organizes its logic around <em>Record Set</em>, a table in relational database. It’s getting complicated to handle business logic in this case. But it easily works with GUI (MS .NET).</p>
<p>Use <em>Domail Model</em> for complex logic. Use <em>Transaction Script</em> (or <em>Table Module</em>) for simple not evolving logic.</p>
<p>Ask expert for advice what to use in my problem.</p>
<p>Consider using <em>Table Module</em> if a lot of tools support <em>Record Set</em>.</p>
<p>Consider using a mix of patterns for domain logic.</p>
<h3 id="Service-layer"><a href="#Service-layer" class="headerlink" title="Service layer"></a>Service layer</h3><p>It is like API for application. It is for Domain Model and Table Module. Use it for security and transactions (rollback, commit, etc). It can be as simple as a Facade or as complex as almost all business logic there with Domain Model being simple.</p>
<p>Some controller-entity approach(?) as a middle between those extremes.</p>
<p>Consider not to use a separate architectural Service Layer and introduce it if the app needs it though there are exceptions.</p>
<h2 id="Chapter-3-Mapping-to-Relational-Databases"><a href="#Chapter-3-Mapping-to-Relational-Databases" class="headerlink" title="Chapter 3. Mapping to Relational Databases"></a>Chapter 3. Mapping to Relational Databases</h2><p>Make choise of mapping as early as possible as it is hard to change later. (Seems not the case now with powerful OR/M tools.)</p>
<h3 id="Architectural-Patterns"><a href="#Architectural-Patterns" class="headerlink" title="Architectural Patterns"></a>Architectural Patterns</h3><p><strong>Separate DB access means (SQL) from Domain Logic</strong>. It is better to use application development language than SQL: 1. many don’t know it; 2. there are specifics for each implementation of SQL. For DB level it is better to use SQL so that DB administrators can tweak it.</p>
<ol>
<li><em>Gateway</em>. An object having all code for database interaction (SQL).<br>1.1. <em>Row Data Gateway</em>. A class per row in table. For simple Domain Model.<br>1.2. <em>Table Data Gateway</em>. To be used with Record Set pattern. Class per whole table in db. Could be used to wrap Stored Procedures. Can be with Domain Model.</li>
<li><em>Active Record</em>. A simple pattern. Have domain logic and knows how to persist itself into DB.</li>
<li><em>Data Mapper</em>. A separate object to map to DB a Domain Model so that the Domain Model can be tested separately and evolve separately. Knows how to map. Handles complex mapping scenarios. For complex solutions.</li>
</ol>
<p>Don’t mess to much those patterns.</p>
<p>Object Oriented Databases are risk for business project at the time they are not well developed.</p>
<p>Consider buying O/R tool for Domain Model as the developing a new one is complex task.</p>
<p>Consider not to use O/R tool for simple solutions.</p>
<h3 id="The-Behavioural-Problem"><a href="#The-Behavioural-Problem" class="headerlink" title="The Behavioural Problem"></a>The Behavioural Problem</h3><p>It is how you load and save objects to database. First sub-problem is that some objects might need ids of newly created objects and that we need to keep track of what was modified to persist it (tracking of modified problem). Another is <em>concurrency problem</em>. Object read should be locked so that other processes don’t modify it.</p>
<p><em>Unit of Work</em>. It solves the two problems above. It controls mapping to DB (controller).</p>
<p><em>Identity Map</em>. A way to keep loaded rows from DB so that one row is not loaded twice. Also can cache them (second aim).</p>
<p><em>Lazy Load</em> aims to load related objects only when process will need them. In that way all objects graph is not loaded from DB.</p>
<h3 id="Reading-in-Data"><a href="#Reading-in-Data" class="headerlink" title="Reading in Data"></a>Reading in Data</h3><p>About a way of querying database. That is about complex methods to query database or “finders”.</p>
<p>Performance problems. Never do multiple queries to get a set of rows from one table.</p>
<p>(and other advice)</p>
<h3 id="Structural-Mapping-Patterns"><a href="#Structural-Mapping-Patterns" class="headerlink" title="Structural Mapping Patterns"></a>Structural Mapping Patterns</h3><h4 id="Mapping-Relations"><a href="#Mapping-Relations" class="headerlink" title="Mapping Relations"></a>Mapping Relations</h4><p>Problems. In OO relations — references (managed or not). In rel. DB they’re foreign keys. The representation problem.</p>
<p>Also in OO it is possible to have multiple references in one field (array), it rel. DB — not (it can’t have multivalued field). Reversal problem.</p>
<p>For solution the following used.<br><em>Identity Map</em> — a lookup table from ID to objects. Keeping ID of row from DB in objects in OO.<br><em>Foreign Key Mapping</em>. To get referenced objects. The same principle as Identity Map but getting referenced object.<br><em>Association Table Mapping</em>— to handle many-to-many relationships.</p>
<p>Consider not to use ordered collections (lists, arrays) for mapping as on loading from DB it needs ordering, the same for persistence.</p>
<p>Map small objects (money, date) or <em>Value Objects</em> are better mapped into <em>Embedded Values</em> or one or many fields in parent table (the table that owns the value).</p>
<p>Consider to use <em>Serialized LOB</em> (Large Object) for storing highly interconnected objects so that many roundtrips to database and back are not done.</p>
<h4 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h4><p>Three patterns here: <em>Single Table Inheritance</em> (all classes in one table; bad in case of many empty columns), <em>Concrete Table Inheritance</em> (a table per concrete class; bad in case of base table modification), <em>Class Table Inheritance</em> (the simplest, but bad in performance as it requires many joins).</p>
<p>Begin with <em>Single Table Inheritance</em>. Mix if needed.</p>
<p>It is possible to use the three patterns for multiple inheritance.</p>
<h4 id="Building-the-Mapping"><a href="#Building-the-Mapping" class="headerlink" title="Building the Mapping"></a>Building the Mapping</h4><p><strong>Code first</strong></p>
<p>The simplest way: I design DB scheme and simple domain. Then choose <em>Transaction Script</em> or <em>Table Module</em>.</p>
<p>In case of <em>Domain Model</em> be sure not to design it in the way DB scheme designed. The DB scheme — only for persistence. If DB scheme is near <em>Domain Model</em> consider to use <em>Active Record</em>.</p>
<p>Iterate DB scheme with domain (not more than six weeks for being late [?]). So that performance issues can be handled as earlier as possible.</p>
<p><strong>Scheme first</strong></p>
<p>The same advice. In simple case choose <em>Row Data Gateway</em> or <em>Table Gateway</em>. In complex case build up <em>Domain Model</em> and then map to DB.</p>
<p><strong>Double mapping</strong></p>
<p>(Advice for the case when there two or more data sources (DB and messages [?]). <em>Gateway</em> can help.)</p>
<h4 id="Using-Metadata"><a href="#Using-Metadata" class="headerlink" title="Using Metadata"></a>Using Metadata</h4><p>About using <em>Metadata Mapping</em>, the reference file where all mapping kept.</p>
<p>(Didn’t understand:<br>    From that you can define the read and write code, automatically generate ad hoc joins, do all of the SQL, enforce the multiplicity of the relationship, and even do fancy things like computing write orders under the presence of referential integrity. This is why commercial O/R mapping tools tend to use metadata.)</p>
<p><em>Query Object</em> (LINQ) can build SQL basing on <em>Metadata Mapping</em>. No need to know SQL.</p>
<p><em>Repository</em> completely hides DB by using <em>Query Object</em>.</p>
<h4 id="Database-connections"><a href="#Database-connections" class="headerlink" title="Database connections"></a>Database connections</h4><p>(Introduction to database connection object.)</p>
<p>Use connection pool if available.</p>
<p>Close = returning to pool. Open = getting from pool.</p>
<p>Close connection as soon as you are done.</p>
<p>Common practice: have a connection object for a db commands. Pass it to the<br>command and then close it.</p>
<p>To pass connection use <em>Registry</em>, thread scoped, thread safe. So that it is<br>not messed up with parameters.</p>
<p>To close connection. First option is to close explicitly but we need to<br>remember it(in c# using solves this?). Second — to close<br>using garbage collection but they remain they live for some time.</p>
<p>Good choice is to tie transaction to connection.</p>
<p>Pooling should allow reading immutable data from within opened connection<br>using another connection.</p>
<p>Remember the problem with concurrency when data is read and written in<br>separate transactions (concurrency part in the book). (ALWAYS a problem with<br>Web.)</p>
<h4 id="Miscellaneous-Points"><a href="#Miscellaneous-Points" class="headerlink" title="Miscellaneous Points"></a>Miscellaneous Points</h4><p>Don’t use <code>select *</code>: there are some problems with indices (didn’t understand).</p>
<p>(Something about test reading/writing to handle indices problem.)</p>
<p>Good chose is not to use dynamic SQL (string concatenation, etc.).</p>
<p>Do batch querying if allowed.</p>
<h2 id="Chapter-4-Web-Presentation"><a href="#Chapter-4-Web-Presentation" class="headerlink" title="Chapter 4. Web Presentation"></a>Chapter 4. Web Presentation</h2><p>(Seems mostly outdated. History and reasons behind web interface usage.)</p>
<p>URL is passed to a web server which handles processing to a program. Two main forms of structuring the program are 1) script; 2) server page. The response is a string and needs to be written to some stream, but that is difficult. So for response server page is better: ASP, JSP, PHP.</p>
<p>(Reasons behind dividing processing of request and respond to script and server page respectfully. This is connected to MVC pattern.)</p>
<p><em>Model View Controller</em>. (Description of MVC work.) (It passes processing back to Web Server after Controller is done? Why?) Main reason behind MVC is to separate Model from View: ability to add views and change model.</p>
<p>The other controller is <em>Application Controller</em> which directs what screens should appear after some others. It mediates between presentation and model layer. Can be reused across different presentations. Consider to use it if the machine should be in control of screens flow not a user (money withdraw?).</p>
<h3 id="View-Patterns"><a href="#View-Patterns" class="headerlink" title="View Patterns"></a>View Patterns</h3><p>(No reasons behind the three patterns so far.)</p>
<p>Main three patterns here: <em>Transform View</em>, <em>Template View</em>, <em>Two Step View</em>.</p>
<p>Choose between <em>Transform View</em> or <em>Template View</em> then choose for chosen if <em>Two Step View</em> is applied.</p>
<p>( <em>Transform View</em> transforms view into HTML, it handles domain elements one by one forming html?)</p>
<p>(<em>Template View</em> inputs into a template (html with special placeholders) the domain and creates the HTML.)</p>
<p><em>Two Step View</em> — …</p>
<p><em>Template View</em> like ASP, JSP, PHP are used to put whole programming statements into the view. Consider extracting those statements into helper classes (ME: ASP.NET — code behind?) so that it does not mess a view.</p>
<p><em>Transform View</em>. Like XSLT can be used for transformation of XML.</p>
<p>One step view — one view for one screen. <em>Two Step View</em> introduces the second stage to produce view, it uses a logic view object; this is useful for screens that share similar design.</p>
<p>(ASP.NET MVC — <em>Tempalte View</em> + <em>Two Step View</em>. Umbraco uses <em>Transform View</em>.)</p>
<h3 id="Input-Controller-Patterns"><a href="#Input-Controller-Patterns" class="headerlink" title="Input Controller Patterns"></a>Input Controller Patterns</h3><p>Two patterns for input controller: <em>Page Controller</em> and <em>Front Controller</em>.</p>
<p><em>Page controller</em> — one controller per page (asp.net webforms?). It can be server page as well as controller, that is it can form the output or this can be divided. In some time we can find that <em>Page controller</em> goes for every action on the page (button click or smth) and serves out not a single page but many pages.</p>
<p><em>Front controller</em> continues separation of handling and processing of requests. In this case there is only one controller that divides who would be responsible for any request.</p>
<p>(What’s difference between <em>Front controller</em> and <em>Application controller</em>?)</p>
<h2 id="Chapter-5-Concurrency"><a href="#Chapter-5-Concurrency" class="headerlink" title="Chapter 5. Concurrency"></a>Chapter 5. Concurrency</h2><p>This problem is raised whenever two calculation processes (OS processes or threads) share one data.</p>
<p>Concurrency is hard problem to solve as there are many unthought situations, it is hardly can be automatically tested.</p>
<p>Many enterprise application solves the problem using transactions. Transacitons don’t solve everything. When there is data that spread across transactions the <strong>offline concurrency</strong> problem appears.</p>
<p><strong>Application server concurrency</strong> is problem with dealing with multiple threads with the same data on the server when scaling up or out an application.</p>
<p>This chapter introduces to issues of the concurrency on the examples of source code control systems.</p>
<h3 id="Concurrency-Problems"><a href="#Concurrency-Problems" class="headerlink" title="Concurrency Problems"></a>Concurrency Problems</h3><p><strong>Lost updates</strong> - when an update is lost because of overriding by an update longer it time (started before the second and finished after). Read1 - Read2 - Change2 - Change1(overrides Change2).</p>
<p><strong>Inconsistent read</strong> - reading of parts of a system while someone modifies them. Read by 1 of A - Change by 2 of A and B - Read by 1 of B (1 has inconsistent data - A).</p>
<p>Trade-offs: concurrency (<strong>liveliness</strong>) or <strong>correctness</strong>. These problem breaks correctness of the system because two users work with the same data at the same time (concurrency). We can solve it by denying concurrency and thus increasing correctness but that reduces liveliness.</p>
<p>Consider if we can tolerate the concurrency issues, thus no new problems will arise.</p>
<h3 id="Execution-Contexts"><a href="#Execution-Contexts" class="headerlink" title="Execution Contexts"></a>Execution Contexts</h3><p>The most essential ones are <strong>Request</strong> and <strong>Session</strong>.</p>
<p>Client sends request that server processes and sends back a response. Client can send other requests while server processes the first one.</p>
<p><strong>Session</strong> is long running series of requests: log in, queries, business transaction, .., log out.</p>
<p><strong>Thread</strong> - execution in process that shares (or not in <strong>isolated threads</strong>) a data, it is light. <strong>Process</strong> - is heavy and have isolation and big execution context.</p>
<p>Thoughts on handling requests. It should be one process per one request but that requires many resources. It tends to associate one process with one request at a time but not kill process after the request is done. (In ASP.NET one thread per one request.)</p>
<p><strong>Transaction</strong> - requests that should be treated as one request (see below). <strong>System transaction</strong> for application needs (example from app to DB). <strong>Business transaction</strong> for user’s needs; from user to application.</p>
<h3 id="Isolation-and-Immutability"><a href="#Isolation-and-Immutability" class="headerlink" title="Isolation and Immutability"></a>Isolation and Immutability</h3><p>Two solutions: <em>isolation</em> and <em>immutability</em>.</p>
<p>Isolation - isolate a thing from write by others. E.g. files locks, or memory for a process in OS.</p>
<p>Don’t use methods that spread concurrency problems. Make isolation areas and do as much programming there as possible.</p>
<p>Identify immutable data and share it widely so concurrency methods don’t take processing time or produce errors.</p>
<h3 id="Optimistic-and-Pessimistic-Concurrency-Control"><a href="#Optimistic-and-Pessimistic-Concurrency-Control" class="headerlink" title="Optimistic and Pessimistic Concurrency Control"></a>Optimistic and Pessimistic Concurrency Control</h3><p>Pessimistic concurrency is when shared resource is locked by the first one who reads it. In optimistic — the changes can’t be applied to already modified resource (like in GIT on push it needs to be merged).</p>
<p>The locks (optimistic and pessimistic) is about conflict prevention. For pessimistic — it is on read, for optimistic — it is on write.</p>
<p>Choosing between optimistic and pessimistic lock: consider how many conflicts (if small number then optimistic), how important a data (if not important and it can be lost then optimistic as automerging is almost always impossible).</p>
<h4 id="Preventing-Inconsistent-Reads"><a href="#Preventing-Inconsistent-Reads" class="headerlink" title="Preventing Inconsistent Reads"></a>Preventing Inconsistent Reads</h4><p>(skipped)</p>
<h4 id="Deadlocks"><a href="#Deadlocks" class="headerlink" title="Deadlocks"></a>Deadlocks</h4><p>Deadlock — is when each of two processes needs to edit data that was locked by each another process (can be for more processes).</p>
<p>(skipped)</p>
<h3 id="Transactions"><a href="#Transactions" class="headerlink" title="Transactions"></a>Transactions</h3><p>It is a bounded set of actions (withdraw cash from ATM, buy a beer, etc.) It starts and ends with <em>consistent</em> resources. It should be based on all-or-nothing basis.</p>
<h4 id="ACID"><a href="#ACID" class="headerlink" title="ACID"></a>ACID</h4><p>Properties of a transaction — ACID: atomicity (it does all or nothing); consistency (it leaves resources consistent at the end and starts with with c. state); isolation (results of it is visible to other transactions only after committing); durability (committed transaction must survive any crash).</p>
<p><strong>Transactional Resources</strong>  or “database”</p>
<p>This is any resource that uses transactions to control concurrency like printer, ATM, message queue. It can be called as “database”.</p>
<p>Try not to create <strong>long transactions</strong>, i.e. the one that spawns multiple requests. To get it use <strong>request transaction</strong>, ie a transaction(s) per a request.</p>
<p>Try <strong>late transaction</strong> which helps in case of long transactions but that does not help against <strong>inconsistent reads</strong>.</p>
<p>Avoid some global locking as in case of some “object” table in DB.</p>
<h4 id="Reducing-Transaction-Isolation-for-Liveness"><a href="#Reducing-Transaction-Isolation-for-Liveness" class="headerlink" title="Reducing Transaction Isolation for Liveness"></a>Reducing Transaction Isolation for Liveness</h4><p>From most isolated to the least:<br><strong>Serializable transaction</strong> — the most strongest isolation; transactions should be put into series or can be put. Guarantees correct answer. A transaction is put before or after another transaction so the answer can be different from time to time but it insures it is correct. Current transaction holds locks on all the range affected (if it once queries a table it holds a insert lock on all the table; hence no phantoms).<br><strong>Repeatable read</strong> — <strong>phantoms</strong> (info that can be distinguished from correct or not) error. Current transaction holds read-lock on <em>its rows</em> after read (so another tran. can insert a new one hence phantoms).<br><strong>Read committed</strong> — <strong>unrepeatable read</strong> phenomena. Current transaction releases read-lock after the read.<br><strong>Read uncommitted</strong> — dirty info from uncommitted transactions. No read or write locks by current trans.; it reads all.</p>
<h4 id="Business-and-System-Transactions"><a href="#Business-and-System-Transactions" class="headerlink" title="Business and System Transactions"></a>Business and System Transactions</h4><p><strong>System transaction</strong> (ST) — similar to DB transaction.<br><strong>Business transaction</strong> (BT) — meaningful to a user, e.g. in a bank, user opens a bill, checks it, pays it or can avoid paying. </p>
<p>BT usually bigger than ST. Long transaction in case of BT=ST is not handy as leads to bottlenecks in DB. So BT is broken into some number of ST. Hence a problem with ACID of BT happens. That is called <strong>offline concurrency</strong>. </p>
<p>Atomicity and Durability of BT can be easily achieved by committing on the end. Consistency is not as Isolation sometime is broken. Thus problems as Inconsistent Reads and invalid updates appear. </p>
<p>Usually multiple BT exists in a user session. Can be many sessions per a BT but that is not advisable. </p>
<h3 id="Patterns-for-Offline-Concurrency-Control"><a href="#Patterns-for-Offline-Concurrency-Control" class="headerlink" title="Patterns for Offline Concurrency Control"></a>Patterns for Offline Concurrency Control</h3><p>Strongly advisable to match BT to ST where possible with a victim of scalability. The patterns are for cases where it can’t be done. </p>
<p><strong>Optimistic Offline Lock</strong> — lock on commit<br><strong>Pessimistic Offline Lock</strong> — lock on read (harder to implement (?))</p>
<p>Also there are patterns to manage locks: <strong>Coarse-Grained Locks</strong>, <strong>Implicit Lock</strong> </p>
<h3 id="Application-Server-Concurrency"><a href="#Application-Server-Concurrency" class="headerlink" title="Application Server Concurrency"></a>Application Server Concurrency</h3><p>(Not important now as there are good thread-per-request frameworks?)<br>About handling concurrency on server for user requests, not business transactions world.<br>“Avoid the need for explicit handling of synchronization and locks as much as possible.”<br>Ways:</p>
<ul>
<li>process-per-request; too many resources;  concrete isolation;</li>
<li>(AK: middle way. thread-per-request with isolation between threads (asp.net, nodejs, etc?)</li>
<li>thread-per-request; no isolation between threads?</li>
</ul>
<p>Author advises to go process-per-request with not experienced team. (AK: Valid now? Asp.net? etc.)</p>
<p>Create objects for each request. Improves scalability (asp.net). Avoid global objects. Avoid Singletons. Use <em>Registry</em>.</p>
<h2 id="Chapter-6-Session-State"><a href="#Chapter-6-Session-State" class="headerlink" title="Chapter 6. Session State"></a>Chapter 6. Session State</h2><p>STATE — a data that not yet ready to be committed to DB (persisted).</p>
<h3 id="The-Value-of-Statelessness"><a href="#The-Value-of-Statelessness" class="headerlink" title="The Value of Statelessness"></a>The Value of Statelessness</h3><p>STATELESS SERVER — state is not stored between requests.<br>Stateless server is useful as it does not require many resources. (And more talk on this and other.)</p>
<p>Stateless server is to be used with many idle users with transactions required state. </p>
<p>State is required as many transactions are with state. </p>
<h3 id="Session-State"><a href="#Session-State" class="headerlink" title="Session State"></a>Session State</h3><p>Session state — something not persisted; one state for one business transaction; state is not shared to other transactions. </p>
<p>Session state can sometime be inconsistent; invalid. Compare with transaction which is consistent. State should be consistent at the end. </p>
<p>Note there is difference between cached data and a state (e.g. policy — state and zip code of a person is not).</p>
<p><strong> Ways to Store Session State </strong><br>1) <em>Client Session State</em> (<em>CSS</em>) — objects are mapped to some storage on client (url, cookie, smth else).<br>2) <em>Server Session State</em> (<em>SSS</em>) — objects are kept in memory, serialized to db, to file system.<br>3) <em>Database Session State</em> (<em>DSS</em>) — objects are mapped to tables, fields (much like usual persistence).</p>
<p><em>CSS</em> :</p>
<ul>
<li>not stored on server;</li>
<li>if large it takes time to transmit;</li>
<li>transmits data not used for presentation;</li>
<li>security vulnerable.</li>
</ul>
<p><em>DSS</em>:</p>
<ul>
<li>state data needs to be isolated from record data. </li>
</ul>
<p><em>SSS</em>:</p>
<ul>
<li>needed to be moved if some clustering used.</li>
</ul>
<p>SERVER AFFINITY — only one machine used to handle one session state in <em>Server Sessions State</em> pattern. </p>
<p><em>DSS</em> can be used with many idle clients and little state (retail system). <em>SSS</em> can be used for large state and not many users (insurance). </p>
<p><em>CSS</em> can be used with many users not saying when they are cancelling the session (B2C). </p>
<p><em>BSS</em> survives connection and server crash. <em>CSS</em> could survive. <em>SSS</em> can not survive. </p>
<p>Development effort: easiest — <em>SSS</em>; <em>CSS</em> — can be hardest; <em>DSS</em> — in the middle.</p>
<p>Fowler prefers <em>SSS</em> and sometime <em>CSS</em>. He doesn’t like <em>DSS</em>.</p>
<h2 id="Chapter-7-Distribution-Strategies"><a href="#Chapter-7-Distribution-Strategies" class="headerlink" title="Chapter 7. Distribution Strategies"></a>Chapter 7. Distribution Strategies</h2><p>Distribution of the Objects. Pitfalls of it.</p>
<h3 id="The-Allure-of-Distributed-Objects"><a href="#The-Allure-of-Distributed-Objects" class="headerlink" title="The Allure of Distributed Objects"></a>The Allure of Distributed Objects</h3><p>When objects are put inside different nodes (processes or machines) in order to get scalability and performance. But it fails as author says. DISTRIBUTION OF OBJECTS is a way to make them transparent and allow to communicate with each other.</p>
<h3 id="Remote-and-Local-Interfaces"><a href="#Remote-and-Local-Interfaces" class="headerlink" title="Remote and Local Interfaces"></a>Remote and Local Interfaces</h3><p>The pitfall of the distribution is that it makes objects to be harder accessed. As there is a fact that LOCAL INTERFACE (procedure call in process) is easily called compared to REMOTE INTERFACE (procedure on another machine, e.g.).</p>
<p>COARSE-GRAINED interfaces are for remote. FINE-GRAINED interfaces for local. As for remote you aim for making many in one call.</p>
<p>Pitfalls:</p>
<ul>
<li>many network calls;</li>
<li>hard to maintain.</li>
</ul>
<p>Don’t distribute objects. Make CLUSTERING (several copies of the same application).</p>
<h3 id="Where-You-Have-to-Distribute"><a href="#Where-You-Have-to-Distribute" class="headerlink" title="Where You Have to Distribute"></a>Where You Have to Distribute</h3><p>On making clustering and eliminating as much distribution as possible. Where distribution will be:</p>
<ul>
<li>Client-server divide;</li>
<li>Database and application server;</li>
<li>Web server and Application Server;</li>
<li>Vendor differences;</li>
<li>Possible spread of application server (Avoid! Sell your grandma not to do it)</li>
</ul>
<h3 id="Working-with-the-Distribution-Boundary"><a href="#Working-with-the-Distribution-Boundary" class="headerlink" title="Working with the Distribution Boundary"></a>Working with the Distribution Boundary</h3><p>(skipped)</p>
<h2 id="Chapter-8-Putting-It-All-Together"><a href="#Chapter-8-Putting-It-All-Together" class="headerlink" title="Chapter 8. Putting It All Together"></a>Chapter 8. Putting It All Together</h2><blockquote>
<p>You should still consider seriously three technical practices: continuous integration [Fowler CI], test driven development [Beck TDD], and refactoring [Fowler Refactoring].</p>
</blockquote>
<p>This ch. repeats previous ones.</p>
<p>Think for yourself. Author doesn’t know your project, your problem.</p>
<blockquote>
<p>You should still consider seriously three technical practices: continuous integration [Fowler CI], test driven development [Beck TDD], and refactoring [Fowler Refactoring].</p>
</blockquote>
<h3 id="Starting-with-the-Domain-Layer"><a href="#Starting-with-the-Domain-Layer" class="headerlink" title="Starting with the Domain Layer"></a>Starting with the Domain Layer</h3><p>Choose from the three: <em>Table Model</em>, <em>Transaction Script</em>, <em>Domain Module</em>.</p>
<p>Consider this factors:</p>
<ol>
<li>Complexity of domain logic.</li>
<li>Difficulty of the connection with a DB.</li>
</ol>
<p><em>Transaction script</em> fits well for not complex logic. E.g. a catalogue with a shopping basket. It is intuitive.</p>
<p><em>Domain Model</em> for complex and big solutions. To learn it well you should learn OOP. The second difficulty is a need for O/R mapping.</p>
<p><em>Table Module</em> stands in the middle of the two. It maps to DB from the box.</p>
<h3 id="Down-to-the-Data-Source-Layer"><a href="#Down-to-the-Data-Source-Layer" class="headerlink" title="Down to the Data Source Layer"></a>Down to the Data Source Layer</h3><h4 id="Data-Source-for-Transaction-Script-TS"><a href="#Data-Source-for-Transaction-Script-TS" class="headerlink" title="Data Source for Transaction Script (TS)"></a>Data Source for <em>Transaction Script</em> (<em>TS</em>)</h4><p>Make separation for <em>TS</em> though it seems fit well to contain DB logic. Here choose from <em>Row Data Gateway</em> and <em>Table Data Gateway</em> (DataAdapter).</p>
<h4 id="Data-source-Table-Model"><a href="#Data-source-Table-Model" class="headerlink" title="Data source Table Model"></a>Data source <em>Table Model</em></h4><p>Use with <em>Table Data Gateway</em> and <em>Record Set</em>.</p>
<h4 id="Data-Source-for-Domain-Model"><a href="#Data-Source-for-Domain-Model" class="headerlink" title="Data Source for Domain Model"></a>Data Source for <em>Domain Model</em></h4><p>For simple — <em>Active Record</em> or if decoupling desired <em>Table Data Gateway</em> or <em>Row Data Gateway</em>.</p>
<p>For more complex — O/R Mapper. (Now, 15.08.2014 Fri 13:21, it is used widely? EF and other.)</p>
<h3 id="Presentation-Layer"><a href="#Presentation-Layer" class="headerlink" title="Presentation Layer"></a>Presentation Layer</h3><p>Choose between Rich client and HTML browser. (Not vivid now, 15.08.2014 Fri 13:23).</p>
<p>For HTML browser. Choose MVC. Then choose patterns for controllers and views. Complex navigation and UI lead to <em>Front Controller</em>.</p>
<p>(Unclear about choosing between views.)</p>
<p>Consider running lower layers in the same process. If that is not possible, then wrap all in <em>Data Transfer Objects</em> and send to <em>Remote Facade</em>.</p>
<h3 id="Some-Technology-Specific-Advice"><a href="#Some-Technology-Specific-Advice" class="headerlink" title="Some Technology-Specific Advice"></a>Some Technology-Specific Advice</h3><p>(Skipping some Java and .NET)</p>
<h4 id="Stored-Procedures"><a href="#Stored-Procedures" class="headerlink" title="Stored Procedures"></a>Stored Procedures</h4><p>Cons:</p>
<ul>
<li>Tied to vendor;</li>
<li>Runs on another process and requires remote calls (except for Oracle).</li>
</ul>
<p>Pros:</p>
<ul>
<li>Faster run. Use for optimization.</li>
</ul>
<h4 id="Web-Services"><a href="#Web-Services" class="headerlink" title="Web Services"></a>Web Services</h4><p>(Unclear.)</p>
<p>Construct as if there is no web services. And use then as <em>Remote Facades</em>. Don’t use web services to make distributed objects design.</p>
<h3 id="Other-Layering-Schemes"><a href="#Other-Layering-Schemes" class="headerlink" title="Other Layering Schemes"></a>Other Layering Schemes</h3><p>(Comparision to other layering.)</p>
<h1 id="Part-2-The-Patterns"><a href="#Part-2-The-Patterns" class="headerlink" title="Part 2. The Patterns"></a>Part 2. The Patterns</h1><p>(see the book)</p>
<hr>
<h1 id="Key-words"><a href="#Key-words" class="headerlink" title="Key words"></a>Key words</h1><p>Architecture — a subjective thing to point to something important; that can be some division on parts or some decisions to be made early as it is hard to change them.<br>Business logic — many irrational things that change over time.<br>Capacity — maximum load a system can bear or getting to some maximum point.<br>Conceptual dissonance — different understanding of terms by many users.<br>Concurrent - происходящий одновременно, соперничающие.<br>Concurrent access — simultaneous access by two or more users to some data.<br>Efficiency — performance divided by hardware. E.g. tps / CPU number.<br>Enterprise application (EA) - …<br>Latency — a minimum time that is required to get any request (much depends on wire).<br>Layer — a part of a system that has a link to only one other layer.<br>Load sensitivity (degradation) — how quickly a system degrades under different loads.<br>Load — current status of stress a system under. E.g. 0.5 seconds for 10 users.<br>Mouthful — a word or a phrase that is quite hardly pronounced<br>Pattern — a solution to a repetitive problem, a description of this problem and solution.<br>Performance — is either response time or throughput.<br>Persistent data — data that persists for a long period of time. Probably longer than the soft that created it.<br>Relational database (RDB) —<br>Response time — how long it takes to process any request and send response back.<br>Responsiveness — how long it takes to acknowledge a request (less or equal to response time).<br>Scalability — how much an adding new resources affects throughput. Scale vertically (up) — adding resources to one server. Scale horizontally (out) — adding more servers.<br>Table (general meaning) — term for table/view/query/stored procedure (which encapsulates a query). A tabular data.<br>Throughput — how much stuff I can do per a time. E.g. bytes per second, transactions per second (consistent transactions) (TPS).<br>Tier — physical part of a system resembling a layer.</p>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tag/книги/" rel="tag"># книги</a>
          
            <a href="/tag/books/" rel="tag"># books</a>
          
            <a href="/tag/programming/" rel="tag"># programming</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/pragmatic-programmer/" rel="next" title="Notes from The Pragmatic Programmer book">
                <i class="fa fa-chevron-left"></i> Notes from The Pragmatic Programmer book
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/Notes-from-Architecting-Applications-for-the-Enterprise/" rel="prev" title="Notes from " architecting="" applications="" for="" the="" enterprise""="">
                Notes from "Architecting Applications for the Enterprise" <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Содержание
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Обзор
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Артём Карпов</p>
              <p class="site-description motion-element" itemprop="description">Разработка ПО</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">Архив</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/tags/index.html">
                    <span class="site-state-item-count">7</span>
                    <span class="site-state-item-name">Тэги</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="mailto:artyomkarpov@gmail.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/artkpv" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://linkedin.com/in/artkpv" target="_blank" title="Linkedin">
                      
                        <i class="fa fa-fw fa-linkedin"></i>Linkedin</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="http://stackoverflow.com/users/511144" target="_blank" title="StackOverflow">
                      
                        <i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.hackerrank.com/ArtyomKarpov" target="_blank" title="Hackerrank">
                      
                        <i class="fa fa-fw fa-line-chart"></i>Hackerrank</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://codeforces.com/profile/artworks" target="_blank" title="Codeforces">
                      
                        <i class="fa fa-fw fa-bar-chart"></i>Codeforces</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Preface"><span class="nav-number">1.</span> <span class="nav-text">Preface</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Introduction"><span class="nav-number">2.</span> <span class="nav-text">Introduction</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Enterprise-Applications-EA"><span class="nav-number">2.1.</span> <span class="nav-text">Enterprise Applications (EA)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kinds-of-EA"><span class="nav-number">2.2.</span> <span class="nav-text">Kinds of EA</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Thinking-About-Performance"><span class="nav-number">2.3.</span> <span class="nav-text">Thinking About Performance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Patterns"><span class="nav-number">2.4.</span> <span class="nav-text">Patterns</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part-1-Introduction-to-problems-of-enterprise-applications-development"><span class="nav-number">3.</span> <span class="nav-text">Part 1. Introduction to problems of enterprise applications development</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-1-Layering"><span class="nav-number">3.1.</span> <span class="nav-text">Chapter 1. Layering</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Three-principal-layers"><span class="nav-number">3.1.1.</span> <span class="nav-text">Three principal layers</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Choosing-where-to-run-your-layers"><span class="nav-number">3.1.2.</span> <span class="nav-text">Choosing where to run your layers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-2-Organizing-Domain-Logic"><span class="nav-number">3.2.</span> <span class="nav-text">Chapter 2. Organizing Domain Logic</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Service-layer"><span class="nav-number">3.2.1.</span> <span class="nav-text">Service layer</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-3-Mapping-to-Relational-Databases"><span class="nav-number">3.3.</span> <span class="nav-text">Chapter 3. Mapping to Relational Databases</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Architectural-Patterns"><span class="nav-number">3.3.1.</span> <span class="nav-text">Architectural Patterns</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Behavioural-Problem"><span class="nav-number">3.3.2.</span> <span class="nav-text">The Behavioural Problem</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Reading-in-Data"><span class="nav-number">3.3.3.</span> <span class="nav-text">Reading in Data</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Structural-Mapping-Patterns"><span class="nav-number">3.3.4.</span> <span class="nav-text">Structural Mapping Patterns</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Mapping-Relations"><span class="nav-number">3.3.4.1.</span> <span class="nav-text">Mapping Relations</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Inheritance"><span class="nav-number">3.3.4.2.</span> <span class="nav-text">Inheritance</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Building-the-Mapping"><span class="nav-number">3.3.4.3.</span> <span class="nav-text">Building the Mapping</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Using-Metadata"><span class="nav-number">3.3.4.4.</span> <span class="nav-text">Using Metadata</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Database-connections"><span class="nav-number">3.3.4.5.</span> <span class="nav-text">Database connections</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Miscellaneous-Points"><span class="nav-number">3.3.4.6.</span> <span class="nav-text">Miscellaneous Points</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-4-Web-Presentation"><span class="nav-number">3.4.</span> <span class="nav-text">Chapter 4. Web Presentation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#View-Patterns"><span class="nav-number">3.4.1.</span> <span class="nav-text">View Patterns</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Input-Controller-Patterns"><span class="nav-number">3.4.2.</span> <span class="nav-text">Input Controller Patterns</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-5-Concurrency"><span class="nav-number">3.5.</span> <span class="nav-text">Chapter 5. Concurrency</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Concurrency-Problems"><span class="nav-number">3.5.1.</span> <span class="nav-text">Concurrency Problems</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Execution-Contexts"><span class="nav-number">3.5.2.</span> <span class="nav-text">Execution Contexts</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Isolation-and-Immutability"><span class="nav-number">3.5.3.</span> <span class="nav-text">Isolation and Immutability</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optimistic-and-Pessimistic-Concurrency-Control"><span class="nav-number">3.5.4.</span> <span class="nav-text">Optimistic and Pessimistic Concurrency Control</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Preventing-Inconsistent-Reads"><span class="nav-number">3.5.4.1.</span> <span class="nav-text">Preventing Inconsistent Reads</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Deadlocks"><span class="nav-number">3.5.4.2.</span> <span class="nav-text">Deadlocks</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Transactions"><span class="nav-number">3.5.5.</span> <span class="nav-text">Transactions</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#ACID"><span class="nav-number">3.5.5.1.</span> <span class="nav-text">ACID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Reducing-Transaction-Isolation-for-Liveness"><span class="nav-number">3.5.5.2.</span> <span class="nav-text">Reducing Transaction Isolation for Liveness</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Business-and-System-Transactions"><span class="nav-number">3.5.5.3.</span> <span class="nav-text">Business and System Transactions</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Patterns-for-Offline-Concurrency-Control"><span class="nav-number">3.5.6.</span> <span class="nav-text">Patterns for Offline Concurrency Control</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Application-Server-Concurrency"><span class="nav-number">3.5.7.</span> <span class="nav-text">Application Server Concurrency</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-6-Session-State"><span class="nav-number">3.6.</span> <span class="nav-text">Chapter 6. Session State</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Value-of-Statelessness"><span class="nav-number">3.6.1.</span> <span class="nav-text">The Value of Statelessness</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Session-State"><span class="nav-number">3.6.2.</span> <span class="nav-text">Session State</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-7-Distribution-Strategies"><span class="nav-number">3.7.</span> <span class="nav-text">Chapter 7. Distribution Strategies</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#The-Allure-of-Distributed-Objects"><span class="nav-number">3.7.1.</span> <span class="nav-text">The Allure of Distributed Objects</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Remote-and-Local-Interfaces"><span class="nav-number">3.7.2.</span> <span class="nav-text">Remote and Local Interfaces</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Where-You-Have-to-Distribute"><span class="nav-number">3.7.3.</span> <span class="nav-text">Where You Have to Distribute</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Working-with-the-Distribution-Boundary"><span class="nav-number">3.7.4.</span> <span class="nav-text">Working with the Distribution Boundary</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Chapter-8-Putting-It-All-Together"><span class="nav-number">3.8.</span> <span class="nav-text">Chapter 8. Putting It All Together</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Starting-with-the-Domain-Layer"><span class="nav-number">3.8.1.</span> <span class="nav-text">Starting with the Domain Layer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Down-to-the-Data-Source-Layer"><span class="nav-number">3.8.2.</span> <span class="nav-text">Down to the Data Source Layer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Source-for-Transaction-Script-TS"><span class="nav-number">3.8.2.1.</span> <span class="nav-text">Data Source for Transaction Script (TS)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-source-Table-Model"><span class="nav-number">3.8.2.2.</span> <span class="nav-text">Data source Table Model</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Data-Source-for-Domain-Model"><span class="nav-number">3.8.2.3.</span> <span class="nav-text">Data Source for Domain Model</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Presentation-Layer"><span class="nav-number">3.8.3.</span> <span class="nav-text">Presentation Layer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Some-Technology-Specific-Advice"><span class="nav-number">3.8.4.</span> <span class="nav-text">Some Technology-Specific Advice</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Stored-Procedures"><span class="nav-number">3.8.4.1.</span> <span class="nav-text">Stored Procedures</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Web-Services"><span class="nav-number">3.8.4.2.</span> <span class="nav-text">Web Services</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Other-Layering-Schemes"><span class="nav-number">3.8.5.</span> <span class="nav-text">Other Layering Schemes</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Part-2-The-Patterns"><span class="nav-number">4.</span> <span class="nav-text">Part 2. The Patterns</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Key-words"><span class="nav-number">5.</span> <span class="nav-text">Key words</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Артём Карпов</span>

  

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/theme-next/hexo-theme-next">NexT.Pisces</a> v6.0.1</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.0.1"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.0.1"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.0.1"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.0.1"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.0.1"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.0.1"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.0.1"></script>



  



	





  





  










  





  

  

  

  
  

  

  

  

</body>
</html>
